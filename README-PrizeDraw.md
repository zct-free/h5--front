# è½¬ç›˜æŠ½å¥–åŠŸèƒ½æ–‡æ¡£

## åŠŸèƒ½æ¦‚è¿°

è½¬ç›˜æŠ½å¥–æ˜¯ä¸€ä¸ªå®Œæ•´çš„ H5 æŠ½å¥–åŠŸèƒ½æ¨¡å—ï¼ŒåŒ…å«ç²¾ç¾çš„è½¬ç›˜åŠ¨ç”»ã€å¥–å“ç®¡ç†ã€ä¸­å¥–è®°å½•ç­‰åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹ç‚¹

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

- **è½¬ç›˜æŠ½å¥–**: æ”¯æŒ 8 ä¸ªå¥–å“ä½ç½®çš„è½¬ç›˜æŠ½å¥–
- **åŠ¨ç”»æ•ˆæœ**: æµç•…çš„è½¬ç›˜æ—‹è½¬åŠ¨ç”»å’Œç¼“åŠ¨æ•ˆæœ
- **æ¦‚ç‡æ§åˆ¶**: æ”¯æŒå¥–å“æ¦‚ç‡æƒé‡é…ç½®
- **ä¸­å¥–è®°å½•**: å®æ—¶è®°å½•å’Œæ˜¾ç¤ºä¸­å¥–å†å²
- **æ¬¡æ•°é™åˆ¶**: æ¯æ—¥æŠ½å¥–æ¬¡æ•°é™åˆ¶ï¼ˆé»˜è®¤ 3 æ¬¡ï¼‰

### ğŸ¨ è§†è§‰æ•ˆæœ

- **æ¸å˜èƒŒæ™¯**: ç‚«å½©æ¸å˜èƒŒæ™¯è‰²
- **æ˜Ÿç©ºç‰¹æ•ˆ**: åŠ¨æ€é—ªçƒæ˜Ÿç©ºæ•ˆæœ
- **å…‰æ™•æ•ˆæœ**: è½¬ç›˜å…‰æ™•å’Œé˜´å½±æ•ˆæœ
- **åŠ¨ç”»äº¤äº’**: æŒ‰é’®æ‚¬æµ®å’ŒæŒ‰å‹æ•ˆæœ
- **å“åº”å¼è®¾è®¡**: é€‚é…ä¸åŒå±å¹•å°ºå¯¸

### ğŸ“± äº¤äº’ä½“éªŒ

- **è§¦æ‘¸å‹å¥½**: ç§»åŠ¨ç«¯è§¦æ‘¸ä¼˜åŒ–
- **å¼¹çª—æç¤º**: ä¸­å¥–ç»“æœå¼¹çª—æ˜¾ç¤º
- **è§„åˆ™è¯´æ˜**: æŠ½å¥–è§„åˆ™æŸ¥çœ‹åŠŸèƒ½
- **è®°å½•æŸ¥çœ‹**: ä¸­å¥–è®°å½•åˆ—è¡¨å±•ç¤º

## æ–‡ä»¶ç»“æ„

```
src/
â”œâ”€â”€ views/prizeDraw/
â”‚   â””â”€â”€ index.vue              # è½¬ç›˜æŠ½å¥–ä¸»ç»„ä»¶
â”œâ”€â”€ api/
â”‚   â””â”€â”€ prizeDraw.js          # æŠ½å¥–ç›¸å…³APIæ¥å£
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ prizeDrawUtils.js     # æŠ½å¥–å·¥å…·å‡½æ•°
â””â”€â”€ router/
    â””â”€â”€ index.js              # è·¯ç”±é…ç½®ï¼ˆå·²æ·»åŠ æŠ½å¥–è·¯ç”±ï¼‰
```

## è·¯ç”±é…ç½®

è®¿é—®è·¯å¾„ï¼š`/prize-draw`

```javascript
{
    path: "/prize-draw",
    name: "PrizeDraw",
    title: "è½¬ç›˜æŠ½å¥–",
    component: () => import("@/views/prizeDraw/index.vue")
}
```

## API æ¥å£è¯´æ˜

### è·å–ç”¨æˆ·æŠ½å¥–ä¿¡æ¯

```javascript
GET /api/prize-draw/user-info
å“åº”ï¼š{
  code: 200,
  data: {
    remainingTimes: 3,    // å‰©ä½™æ¬¡æ•°
    todayDraws: 0        // ä»Šæ—¥å·²æŠ½æ¬¡æ•°
  }
}
```

### æ‰§è¡ŒæŠ½å¥–

```javascript
POST /api/prize-draw/draw
å“åº”ï¼š{
  code: 200,
  data: {
    prizeId: 1,          // å¥–å“ID
    prizeName: "ä¸€ç­‰å¥–",  // å¥–å“åç§°
    prizeType: "physical" // å¥–å“ç±»å‹
  }
}
```

### è·å–å¥–å“åˆ—è¡¨

```javascript
GET /api/prize-draw/prizes
å“åº”ï¼š{
  code: 200,
  data: [
    {
      id: 1,
      name: "ä¸€ç­‰å¥–",
      icon: "",
      probability: 0.05,
      color: "#ff6b6b",
      type: "physical"
    }
    // ... æ›´å¤šå¥–å“
  ]
}
```

### è·å–ä¸­å¥–è®°å½•

```javascript
GET /api/prize-draw/records?limit=10
å“åº”ï¼š{
  code: 200,
  data: [
    {
      prizeId: 1,
      prizeName: "ä¸€ç­‰å¥–",
      prizeType: "physical",
      createTime: "2024-06-30T10:00:00Z"
    }
    // ... æ›´å¤šè®°å½•
  ]
}
```

### é¢†å–å¥–å“

```javascript
POST /api/prize-draw/claim
è¯·æ±‚ï¼š{ prizeId: 1 }
å“åº”ï¼š{
  code: 200,
  message: "é¢†å–æˆåŠŸ"
}
```

## å¥–å“é…ç½®

### é»˜è®¤å¥–å“é…ç½®

```javascript
const DEFAULT_PRIZES = [
  { id: 1, name: "ä¸€ç­‰å¥–", probability: 0.05, color: "#ff6b6b", type: "physical" },
  { id: 2, name: "äºŒç­‰å¥–", probability: 0.1, color: "#feca57", type: "physical" },
  { id: 3, name: "ä¸‰ç­‰å¥–", probability: 0.15, color: "#48dbfb", type: "physical" },
  { id: 4, name: "è°¢è°¢å‚ä¸", probability: 0.3, color: "#ff9ff3", type: "none" },
  { id: 5, name: "ç§¯åˆ†å¥–åŠ±", probability: 0.2, color: "#54a0ff", type: "points" },
  { id: 6, name: "å†æ¥ä¸€æ¬¡", probability: 0.15, color: "#5f27cd", type: "extra" },
  { id: 7, name: "å°ç¤¼å“", probability: 0.04, color: "#00d2d3", type: "gift" },
  { id: 8, name: "æƒŠå–œå¤§å¥–", probability: 0.01, color: "#ff6348", type: "special" },
];
```

### å¥–å“ç±»å‹è¯´æ˜

- `physical`: å®ç‰©å¥–å“
- `points`: ç§¯åˆ†å¥–åŠ±
- `extra`: é¢å¤–æœºä¼š
- `gift`: å°ç¤¼å“
- `special`: ç‰¹æ®Šå¥–å“
- `none`: æ— å¥–å“

## æœ¬åœ°å­˜å‚¨

### å­˜å‚¨é”®å

- `prizeDraw_remainingTimes`: å‰©ä½™æŠ½å¥–æ¬¡æ•°
- `prizeDraw_todayDraws`: ä»Šæ—¥å·²æŠ½æ¬¡æ•°
- `prizeDraw_winRecords`: ä¸­å¥–è®°å½•
- `prizeDraw_lastResetDate`: ä¸Šæ¬¡é‡ç½®æ—¥æœŸ

### æ¯æ—¥é‡ç½®

ç³»ç»Ÿä¼šåœ¨æ¯å¤©é¦–æ¬¡æ‰“å¼€é¡µé¢æ—¶è‡ªåŠ¨é‡ç½®æŠ½å¥–æ¬¡æ•°ã€‚

## è‡ªå®šä¹‰é…ç½®

### ä¿®æ”¹å¥–å“æ•°é‡

å¯ä»¥é€šè¿‡ä¿®æ”¹ `DEFAULT_PRIZES` æ•°ç»„æ¥è°ƒæ•´å¥–å“æ•°é‡ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—æ‰‡å½¢è§’åº¦ã€‚

### ä¿®æ”¹åŠ¨ç”»æ—¶é•¿

```javascript
// åœ¨ prizeDrawUtils.js ä¸­ä¿®æ”¹
export function createWheelAnimation(startAngle, targetAngle, duration = 3000, updateCallback)
```

### ä¿®æ”¹æ¯æ—¥æŠ½å¥–æ¬¡æ•°

```javascript
// åœ¨ performDailyReset() å‡½æ•°ä¸­ä¿®æ”¹
StorageManager.save("remainingTimes", 3); // æ”¹ä¸ºå…¶ä»–æ•°å­—
```

### ä¿®æ”¹è½¬ç›˜é¢œè‰²

åœ¨å¥–å“é…ç½®ä¸­ä¿®æ”¹ `color` å±æ€§å³å¯æ”¹å˜å¯¹åº”æ‰‡å½¢çš„é¢œè‰²ã€‚

## æ ·å¼è‡ªå®šä¹‰

### ä¸»è¦ CSS å˜é‡

```less
// è½¬ç›˜å°ºå¯¸
.wheel-container .wheel-bg {
  width: 300px;
  height: 300px;
}

// æŒ‰é’®å°ºå¯¸
.draw-button {
  width: 80px;
  height: 80px;
}

// èƒŒæ™¯æ¸å˜
.prize-draw-container {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}
```

### å“åº”å¼æ–­ç‚¹

```less
@media (max-width: 480px) {
  // å°å±å¹•é€‚é…
}
```

## é”™è¯¯å¤„ç†

### API å¤±è´¥å¤„ç†

- å½“ API è°ƒç”¨å¤±è´¥æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ä½¿ç”¨æœ¬åœ°æ¨¡æ‹Ÿæ•°æ®
- ç”¨æˆ·æ•°æ®ä¼˜å…ˆä» API è·å–ï¼Œå¤±è´¥æ—¶ä½¿ç”¨æœ¬åœ°å­˜å‚¨
- æ‰€æœ‰ç½‘ç»œè¯·æ±‚éƒ½æœ‰é”™è¯¯æç¤º

### æ•°æ®éªŒè¯

- å¥–å“é…ç½®éªŒè¯
- æ¦‚ç‡æ€»å’Œæ£€æŸ¥
- æœ¬åœ°å­˜å‚¨æ•°æ®æ ¡éªŒ

## æ€§èƒ½ä¼˜åŒ–

### åŠ¨ç”»æ€§èƒ½

- ä½¿ç”¨ `requestAnimationFrame` å®ç°æµç•…åŠ¨ç”»
- CSS3 `transform` ç¡¬ä»¶åŠ é€Ÿ
- åˆç†çš„åŠ¨ç”»æ—¶é•¿å’Œç¼“åŠ¨å‡½æ•°

### å†…å­˜ç®¡ç†

- ç»„ä»¶é”€æ¯æ—¶æ¸…ç†å®šæ—¶å™¨
- é™åˆ¶ä¸­å¥–è®°å½•æ•°é‡ï¼ˆæœ€å¤š 10 æ¡ï¼‰
- åˆç†çš„æœ¬åœ°å­˜å‚¨ä½¿ç”¨

## ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

```vue
<template>
  <router-view />
</template>
```

è®¿é—® `/prize-draw` å³å¯ä½¿ç”¨æŠ½å¥–åŠŸèƒ½ã€‚

### åµŒå…¥åˆ°å…¶ä»–é¡µé¢

```vue
<template>
  <div>
    <PrizeDraw />
  </div>
</template>

<script>
import PrizeDraw from "@/views/prizeDraw/index.vue";

export default {
  components: {
    PrizeDraw,
  },
};
</script>
```

## æ³¨æ„äº‹é¡¹

1. **ç½‘ç»œä¾èµ–**: åŠŸèƒ½éœ€è¦ç½‘ç»œ API æ”¯æŒï¼Œç¦»çº¿æ—¶ä½¿ç”¨æœ¬åœ°æ¨¡æ‹Ÿæ•°æ®
2. **æµè§ˆå™¨å…¼å®¹**: ä½¿ç”¨äº†ç°ä»£ CSS ç‰¹æ€§ï¼Œå»ºè®®åœ¨è¾ƒæ–°æµè§ˆå™¨ä¸­ä½¿ç”¨
3. **ç§»åŠ¨ç«¯ä¼˜åŒ–**: å·²é’ˆå¯¹ç§»åŠ¨ç«¯è§¦æ‘¸è¿›è¡Œä¼˜åŒ–
4. **æ€§èƒ½è€ƒè™‘**: å¤§é‡åŠ¨ç”»å¯èƒ½å½±å“ä½ç«¯è®¾å¤‡æ€§èƒ½

## åç»­æ‰©å±•

### å¯èƒ½çš„åŠŸèƒ½æ‰©å±•

- å¤šç§è½¬ç›˜ä¸»é¢˜
- éŸ³æ•ˆæ”¯æŒ
- åˆ†äº«åŠŸèƒ½
- æ›´å¤šåŠ¨ç”»æ•ˆæœ
- å¥–å“å›¾ç‰‡æ”¯æŒ
- ç»Ÿè®¡åˆ†æåŠŸèƒ½

### æŠ€æœ¯æ”¹è¿›

- TypeScript æ”¯æŒ
- å•å…ƒæµ‹è¯•è¦†ç›–
- å›½é™…åŒ–æ”¯æŒ
- çŠ¶æ€ç®¡ç†ä¼˜åŒ–
